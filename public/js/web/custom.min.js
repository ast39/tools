/*

© «HandyMan» – MultiPurpose WordPress Site
Created by dzen-design.ru, 2020
License https://dzen-design.ru/agreement

*/

function popupBox() {
    $(".searchBox__btn").on("click", function() {
        return $(".searchPopupBox").addClass("popupBox_open"),
        $(".searchPopupBox").find('input[type="search"]').delay(150).queue(function(t) {
            $(this).focus(),
            t()
        }),
        !1
    }),
    $(".burger").on("click", function() {
        $(".mobilePopupBox").addClass("popupBox_open"),
        $("body").addClass("bodyFixed")
    }),
    $(document).keydown(function(t) {
        $(".searchPopupBox").hasClass("popupBox_open") && 27 == t.which && $(".searchPopupBox").removeClass("popupBox_open"),
        $(".mobilePopupBox").hasClass("popupBox_open") && 27 == t.which && ($(".mobilePopupBox").removeClass("popupBox_open"),
        $("body").removeClass("bodyFixed"))
    }),
    $(".popupClose").on("click", function() {
        $(this).parent(".popupBox").removeClass("popupBox_open"),
        $("body").hasClass("bodyFixed") && $("body").removeClass("bodyFixed")
    }),
    $(window).resize(function() {
        1199 < $(window).width() && $(".mobilePopupBox").hasClass("popupBox_open") && ($(".mobilePopupBox").removeClass("popupBox_open"),
        $("body").removeClass("bodyFixed"))
    })
}
function mobileMenu() {
    $(".mobileNav .headerMenu").removeClass().addClass("mobileMenu"),
    $(".mobileMenu .sub-menu").before('<span class="subMenuToggle"></span>'),
    $(".menu-item .subMenuToggle").on("click", function() {
        $(this).parent(".menu-item").hasClass("item_open") ? $(this).parent(".menu-item").removeClass("item_open").children(".sub-menu").slideUp(250, "linear") : $(this).parent(".menu-item").addClass("item_open").children(".sub-menu").slideDown(250, "linear")
    })
}
function popupOrderService() {
    $(".servicePriceTable__btn").on("click", function() {
        var t = $(this).parents(".servicePriceTable__tr").find(".servicePriceTable__title_name").html();
        $("body").find(".popupOrderServ input.formService").val(t)
    })
}
function addWrpToImg() {
    var t = $(".postContent img")
      , e = $(".postContent").width();
    t.each(function(t) {
        $(this).parents().hasClass("gallery") || ($(this).parents().hasClass("wp-caption") ? ($(this).parent().is("a") && (imgNaturalWidth = $(this).naturalWidth(),
        $(this).parent("a").wrap('<div class="postContent__img"></div>'),
        imgNaturalWidth < e ? ($(this).parents(".postContent__img").css("width", imgNaturalWidth),
        $(this).parents(".wp-caption").find(".wp-caption-text").css("width", imgNaturalWidth)) : ($(this).css("width", "auto"),
        $(this).parents(".wp-caption").find(".wp-caption-text").css("width", "auto")),
        $(this).parents(".wp-caption").hasClass("alignleft") && ($(this).parents(".wp-caption").removeClass("alignleft"),
        $(this).parents(".wp-caption").find(".wp-caption-text").addClass("alignleft"),
        $(this).parents(".postContent__img").addClass("alignleft")),
        $(this).parents(".wp-caption").hasClass("alignright") && ($(this).parents(".wp-caption").removeClass("alignright"),
        $(this).parents(".wp-caption").find(".wp-caption-text").addClass("alignright"),
        $(this).parents(".postContent__img").addClass("alignright")),
        $(this).parents(".wp-caption").hasClass("aligncenter") && ($(this).parents(".wp-caption").removeClass("aligncenter"),
        $(this).parents(".wp-caption").find(".wp-caption-text").addClass("aligncenter"),
        $(this).parents(".postContent__img").addClass("aligncenter")),
        $(this).parents(".wp-caption").hasClass("alignnone") && ($(this).parents(".wp-caption").removeClass("alignnone"),
        $(this).parents(".wp-caption").find(".wp-caption-text").addClass("alignnone"),
        $(this).parents(".postContent__img").addClass("alignnone"))),
        $(this).parents(".wp-caption").css("width", "auto")) : $(this).parent().is("a") && (imgNaturalWidth = $(this).naturalWidth(),
        $(this).parent("a").wrap('<div class="postContent__img"></div>'),
        imgNaturalWidth < e ? ($(this).parents(".postContent__img").css("width", imgNaturalWidth),
        $(this).parents(".wp-caption").find(".wp-caption-text").css("width", imgNaturalWidth)) : ($(this).parents(".postContent__img").css("width", "auto"),
        $(this).parents(".wp-caption").find(".wp-caption-text").css("width", "auto")),
        $(this).hasClass("alignleft") && $(this).parents(".postContent__img").addClass("alignleft"),
        $(this).hasClass("alignright") && $(this).parents(".postContent__img").addClass("alignright"),
        $(this).hasClass("aligncenter") && $(this).parents(".postContent__img").addClass("aligncenter"),
        $(this).hasClass("alignnone") && $(this).parents(".postContent__img").addClass("alignnone")))
    }),
    $(window).resize(function() {
        t.each(function(t) {
            $(this).parents(".postContent__img").css("width", "auto"),
            $(this).parents(".postContent__img").width() >= $(this).naturalWidth() ? ($(this).parents(".postContent__img").css("width", $(this).naturalWidth()),
            $(this).parents(".wp-caption").find(".wp-caption-text").css("width", $(this).naturalWidth())) : ($(this).parents(".postContent__img").css("width", "auto"),
            $(this).parents(".wp-caption").find(".wp-caption-text").css("width", "auto"))
        })
    })
}
$(window).load(function() {
    (navigator.userAgent.match(/msie/i) || navigator.userAgent.match(/trident/i)) && $("html").addClass("ie"),
    $(".formPhone").mask("+7 (999) 999-99-99"),
    popupBox(),
    mobileMenu(),
    popupOrderService(),
    addWrpToImg()
}),
$(function() {
    $("body").append(unescape("%u003c%u0021%u002d%u002d%u0020%u0420%u0430%u0437%u0440%u0430%u0431%u043e%u0442%u0430%u043d%u043e%u0020%u0432%u0020%u0064%u007a%u0065%u006e%u002d%u0064%u0065%u0073%u0069%u0067%u006e%u002e%u0072%u0075%u0020%u002d%u002d%u003e"))
}),
$(function() {
    $.scrollUp({
        scrollDistance: 400,
        scrollFrom: "top",
        scrollSpeed: 750,
        easingType: "easeOutCubic",
        animationSpeed: 250,
        scrollText: "",
        scrollTitle: "Наверх",
        scrollImg: !1,
        zIndex: 1e3
    })
}),
function(e) {
    for (var t, i = ["Width", "Height"]; t = i.pop(); )
        !function(t, s) {
            e.fn[t] = t in new Image ? function() {
                return this[0][t]
            }
            : function() {
                var t, e, i = this[0];
                return "img" === i.tagName.toLowerCase() && ((t = new Image).src = i.src,
                e = t[s]),
                e
            }
        }("natural" + t, t.toLowerCase())
}(jQuery);
